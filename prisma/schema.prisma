generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String    @id @default(cuid())
  name          String?
  email         String?   @unique
  emailVerified DateTime?
  image         String?
  accounts      Account[]
  results       Result[]
  sessions      Session[]
}

model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String?
  access_token      String?
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String?
  session_state     String?
  user              User    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
}

model Result {
  id                String   @id @default(cuid())
  year              String
  candidateName     String
  sex               String?
  school            String?
  lga               String?
  examinationNumber String   @unique
  englishGrade      String?
  mathGrade         String?
  generalPaperGrade String?
  crsGrade          String?
  remark            String?
  pinCode           String?
  serialNumber      String?
  lgaExamNumber     String?
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  userId            String?
  user              User?    @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model School {
  id                   String                @id @default(cuid())
  lgaCode              String
  schoolCode           String
  schoolName           String
  password             String
  createdAt            DateTime              @default(now())
  updatedAt            DateTime              @updatedAt
  studentRegistrations StudentRegistration[]

  @@unique([lgaCode, schoolCode])
}

model StudentRegistration {
  id              String   @id @default(cuid())
  accCode         String   @unique @default(cuid())
  studentNumber   String   @unique
  firstname       String
  othername       String?
  lastname        String
  gender          String
  schoolType      String
  passport        String?
  englishTerm1    String?
  englishTerm2    String?
  englishTerm3    String?
  arithmeticTerm1 String?
  arithmeticTerm2 String?
  arithmeticTerm3 String?
  generalTerm1    String?
  generalTerm2    String?
  generalTerm3    String?
  religiousType   String?
  religiousTerm1  String?
  religiousTerm2  String?
  religiousTerm3  String?
  schoolId        String
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  school          School   @relation(fields: [schoolId], references: [id], onDelete: Cascade)
}
